$(document).ready(function(){function _(e,t,i){this.name=e,this.suit=t,this.value=i}function x(t,i,s){var r=new Array,o=new Array,l=new Array,u="",h=0,c=0,d=0,p=0,m=0,y=0;a.length=0,e=new Array(0,0,0,0,0,0,0),n=new Array("","","","","","Spades","",""),g=new Array(0,0,0,0,0,0,0,0);for(var _=0;_<i.length;_++)S(0,i[_],1),g[0]=0;for(var _=0;_<i.length-1;_++){y=0;for(var x="",k=0,w=_;w<i.length-1;w++)if(i[_].value==i[w+1].value&&(S(1,i[_],1),S(1,i[w+1],1),g[1]=0,1>=c&&(c=1),0==y?(a[a.length]=i[_],a[a.length]=i[w+1]):y>=1&&(a[a.length]=i[w+1]),a[h].value==i[w+1].value&&(h+=0==y?2:1,h>=3&&2>=c&&(c=2)),y+=1),i[_].suit==i[w+1].suit&&((x==i[w+1].suit||""==x)&&(x=i[_].suit,k+=1),k>=4&&5>=c)){for(var D=0;D<i.length;D++)i[D].suit==i[_].suit&&(S(4,i[D],1),g[4]=0);c=5,d=1}}if(y=0,a.length>=2)for(var _=0;_<a.length-2;_++)if(a[_].value==a[_+1].value&&a[_].value==a[_+2].value){S(2,a[_],1),S(2,a[_+1],1),_+2<a.length&&S(2,a[_+2],1),3>=c&&(c=3);for(var w=0;w<i.length;w++)a[_].value==i[w].value&&(y+=1,7>=c&&4==y&&(S(5,a[_],0),c=7));y=0,h>=6&&6>=c&&(c=6)}for(var w=0;w<i.length;w++)for(var _=1;5>_;_++)r[r.length]=A(i[w].value,_,i),o[o.length]=I(i[w],_,i),l[l.length]=i[w].suit;for(var _=0;_<r.length;_++){if(0!=r[_]&&(p+=1,4==p&&4>=c)){for(var D=0;D<i.length;D++)r[_]==i[D].value&&S(3,i[D],1);g[3]=0,T(3,r[_]),c=4}if(0!=o[_]&&(m+=1,4==m&&8>=c)){var C=T(6,o[_]);1==C&&(E(6,l[_]),g[6]=0),c=8}(_+1)%4==0&&0!=_&&(p=0,m=0)}l.length=0,m=0,o.length=0;for(var _=0;_<i.length;_++)if(10==i[_].value)for(var w=1;4>w;w++)o[o.length]=I(i[_],w,i),l[l.length]=i[_].suit;for(var _=0;_<o.length;_++){if(0!=o[_]&&(m+=1,3==m))for(var w=0;w<i.length;w++)1==i[w].value&&l[_]==i[w].suit&&9>=c&&(E(7,i[w].suit),c=9);(_+1)%3==0&&(m=0)}switch(c){case 0:u=n[0]+" "+e[0]+" High Card",P(s,0,0,0);break;case 1:u=n[1]+" "+e[1]+" One Pare",P(s,1,1,1);break;case 2:u=n[1]+" "+e[1]+" Two Pare",P(s,2,1,1);break;case 3:u=n[2]+" "+e[2]+" Three Card",P(s,3,2,2);break;case 4:u=n[3]+" "+e[3]+" Straight",P(s,4,3,3);break;case 5:u=n[4]+" "+e[4]+" Flush",P(s,5,4,4);break;case 6:u=n[2]+" "+e[2]+" FullHouse",P(s,6,2,2);break;case 7:u=n[5]+" "+e[5]+" Four Card",P(s,7,5,5);break;case 8:u=n[6]+" "+e[6]+" Straight Flush",P(s,8,6,6);break;case 9:u=n[7]+" Royal Straight Flush",P(s,9,7,14)}"#result_1"==t?v=u:$(t).html(u)}function k(){for(var e=0;2>e;e++)D("#enemy_hand",i),D("#my_hand",s)}function w(){$("#hit").hide(),$("#Restart").show(),$(".back").remove(),$("#enemy_in").show(),$("#button").hide()}function D(e,i){var s=!0;(r[0]<=0||r[1]<=0)&&($("#Call").hide(),$("#Half").hide(),$("#Full").hide(),$("#Check").show(),f=1);e:for(;s;){if(t.length>=14){$("#result_1").html(v),3!=y&&(y=F()),0==y?($("#result").html("You are Winner"),r[1]+=o):1==y&&($("#result").html("You are Loser"),r[0]+=o),w(),y=3;break e}for(var a=C(52),n=0;n<t.length;n++)t[n]==a&&(n=99);if(100!=n){var l=R[a];t[t.length]=a,i[i.length]=l;var u=$("<div>");$("<img>").appendTo(u).attr("src","images/cards/"+l.suit+"/"+l.name+".jpg").fadeOut("slow").fadeIn("slow"),u.appendTo($(e)),s=!1}}}function T(t,i){return e[t]<=i?(e[t]=i,1):0}function S(t,i,s){e[t]<=i.value&&(e[t]=i.value,1==s?E(t,i.suit):2==s&&E(t,indiex2))}function C(e){var t=Math.floor(Math.random()*e);return t}function M(e){if(t.length<=14)for(var i=m.length-1;i>=0;i--)if(0!=m[i][1])return u=30+5*i,N(u),1==h&&0==c&&0!=e&&$("#hit").trigger("click"),0}function N(e){if(3!=d&&0==h||1==h){var t=Math.floor(101*Math.random()-e)+e;1==c&&t>35&&(alert("EnemyChoice isn`t Check"),$("#Check").hide()),35>=t&&1==d||35>=t&&1==h&&3!=d&&4!=d?($("#Check").show(),alert("Enemy의 "+b+"번 째 드랍 카드의 선택 : Check"),1==c&&(b+=1),c=2,d=3):60>t?(alert("Enemy의 "+b+"번 째 드랍 카드의 선택 : Call"),L("#enemymoney",0),1==c&&(d=3)):70>=t?(alert("Enemy의 "+b+"번 째 드랍 카드의 선택 : Half"),H(),L("#enemymoney",0),1==c&&(d=3)):(alert("Enemy의 "+b+"번 째 드랍 카드의 선택 : Full"),j(),L("#enemymoney",0),1==c&&(d=3))}}function A(e,t,i){for(var s=0;s<i.length;s++)if(e+t==i[s].value)return e+t;return 0}function I(e,t,i){for(var s=0;s<i.length;s++)if(e.value+t==i[s].value&&e.suit==i[s].suit)return e.value+t;return 0}function E(e,t){var i=[["Clubs",1],["Hearts",2],["Diamonds",3],["Spades",4]],s=0;if(0==g[e])for(var a=0;4>a;a++)t==i[a][0]&&(g[e]=i[a][1]);else for(var a=0;4>a;a++)t==i[a][0]&&(s=i[a][1]);g[e]<s?(n[e]=t,g[e]=s):0==s&&(n[e]=t)}function P(t,i,s,a){t[i][0]=n[s],t[i][1]=e[a]}function F(){for(var e=0,t=0,i=[["Clubs",1],["Hearts",2],["Diamonds",3],["Spades",4]],s=p.length-1;s>=0;s--)if(0!=p[s][1]&&(e=1),0!=m[s][1]&&(t=1),1==e||1==t){if(p[s][1]>m[s][1])return 0;if(p[s][1]<m[s][1])return 1;for(var a=0;a<i.length;a++)p[s][0]==i[a][0]&&(e=i[a][1]),m[s][0]==i[a][0]&&(t=i[a][1]);if(e>t)return 0;if(t>e)return 1}}function O(){var e=$("<div>");$("<img>").appendTo(e).attr({src:"images/enemy.jpg","class":"back"}).fadeOut("slow").fadeIn("slow"),e.appendTo($("#enemy_hand"))}function H(){l=1500>=o?1500:parseInt(o/2)}function j(){l=2e3>=o?2e3:parseInt(o)}function L(e,i){if(t.length<=14){if(l>r[i]&&(l=r[i]),o+=l,r[i]-=l,1==h&&14==t.length&&(3==d&&(b-=1,d=4,M(0)),t.length=15,$("#hit").trigger("click")),r[0]<=0){r[0]=0;var s="Enemy Have Money : $"+r[i];return $(e).html(s),$("#total").html("Total Money : $"+o),0}if(r[1]<=0){r[1]=0;var a="I Have Money : $"+r[i];return $(e).html(a),$("#total").html("Total Money : $"+o),0}if(0==i){var s="Enemy Have Money : $"+r[i];$(e).html(s)}else{var a="I Have Money : $"+r[i];$(e).html(a)}$("#total").html("Total Money : $"+o)}}function z(){0==h&&0==c&&$("#hit").trigger("click"),0==h&&$("#Check").show(),1==h&&3!=d&&1!=f&&$("#Check").hide(),c=0}var e=new Array(0,0,0,0,0,0,0),t=new Array,i=new Array,s=new Array,a=new Array,n=new Array("","","","","","Spades","",""),r=new Array(3e5,3e5),o=0,l=1e3,u=0,h=0,c=0,d=0,f=0,p=[["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0]],m=[["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0]],g=new Array(0,0,0,0,0,0,0,0),v="",y=0,b=0,R=[new _("Ace","Hearts",1),new _("Two","Hearts",2),new _("Three","Hearts",3),new _("Four","Hearts",4),new _("Five","Hearts",5),new _("Six","Hearts",6),new _("Seven","Hearts",7),new _("Eight","Hearts",8),new _("Nine","Hearts",9),new _("Ten","Hearts",10),new _("Jack","Hearts",11),new _("Queen","Hearts",12),new _("King","Hearts",13),new _("Ace","Diamonds",1),new _("Two","Diamonds",2),new _("Three","Diamonds",3),new _("Four","Diamonds",4),new _("Five","Diamonds",5),new _("Six","Diamonds",6),new _("Seven","Diamonds",7),new _("Eight","Diamonds",8),new _("Nine","Diamonds",9),new _("Ten","Diamonds",10),new _("Jack","Diamonds",11),new _("Queen","Diamonds",12),new _("King","Diamonds",13),new _("Ace","Clubs",1),new _("Two","Clubs",2),new _("Three","Clubs",3),new _("Four","Clubs",4),new _("Five","Clubs",5),new _("Six","Clubs",6),new _("Seven","Clubs",7),new _("Eight","Clubs",8),new _("Nine","Clubs",9),new _("Ten","Clubs",10),new _("Jack","Clubs",11),new _("Queen","Clubs",12),new _("King","Clubs",13),new _("Ace","Spades",1),new _("Two","Spades",2),new _("Three","Spades",3),new _("Four","Spades",4),new _("Five","Spades",5),new _("Six","Spades",6),new _("Seven","Spades",7),new _("Eight","Spades",8),new _("Nine","Spades",9),new _("Ten","Spades",10),new _("Jack","Spades",11),new _("Queen","Spades",12),new _("King","Spades",13)];$("#deal").click(function(){k(),x("#result_1",i,m),x("#result_2",s,p),$("#enemymoney").html("Enemy Have Money : $"+r[0]),$("#mymoney").html("I Have Money : $"+r[1]),$("#deal").hide(),$("#hit").show(),$("#button").show(),$("#enemy_in").hide(),0==h&&$("#hit").trigger("click"),1==h&&($("#Check").hide(),b+=1,M(),0!=c&&(c=4,$("#hit").trigger("click")))}),$("#hit").click(function(){4!=c?(d=0,c=0):c=0,O(),D("#enemy_in",i),D("#my_hand",s),x("#result_1",i,m),x("#result_2",s,p)}),$("#Restart").click(function(){$("#Call").show(),$("#Half").show(),$("#Full").show(),1==h&&$("#Check").show(),$("#enemymoney").html("Enemy Have Money : $"+r[0]),$("#mymoney").html("I Have Money : $"+r[1]),(0==r[0]||0==r[1])&&(0==r[0]?($("#enemymoney").html("Enemy is Loser"),$("#mymoney").html("I Am Winner")):0==r[1]&&($("#enemymoney").html("Enemy is Winner"),$("#mymoney").html("I Am Loser")),r=new Array(3e5,3e5)),$(this).toggle(),$("#my_hand").empty(),$("#enemy_hand").empty(),$("#deal").show(),$("#result").html("Poker Game"),$("#result_1").html(" "),$("#result_2").html(""),$("#total").html("Total Money : $0"),e=new Array(0,0,0,0,0,0,0),t.length=0,i.length=0,s.length=0,a.length=0,y=0,u=0,b=0,o=0,l=1e3,f=0,v="",h=1-h,n=new Array("","","","","","Spades","",""),g=new Array(0,0,0,0,0,0,0,0),p=[["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0]],m=[["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0],["",0]];var c=$("<div>").attr("id","enemy_in");c.appendTo($("#enemy_hand"))}),$("#Call").click(function(){b+=1,L("#mymoney",1),3==d&&1==h?(b-=1,M(0),b+=1,M()):(M(),2==c&&1==h&&(t.length>=14&&M(0),c=4,$("#hit").trigger("click"))),z()}),$("#Half").click(function(){b+=1,H(),L("#mymoney",1),3==d&&1==h?(M(0),M()):(M(),2==c&&1==h&&(c=4,$("#hit").trigger("click"))),z()}),$("#Full").click(function(){b+=1,j(),L("#mymoney",1),3==d&&1==h?(b-=1,M(0),b+=1,M()):(M(),2==c&&1==h&&(c=4,$("#hit").trigger("click"))),z()}),$("#Check").click(function(){return 1==f?($("#hit").trigger("click"),0):(b+=1,0==h&&t.length<=4&&$("#hit").trigger("click"),0==h&&(c=1,d=1),1==h?(c=2,$("#Check").hide()):M(),3==d&&0==h&&(b-=1),2!=c&&(c=0),1==h&&t.length<14&&M(0),void(2==c&&(c=0,$("#hit").trigger("click"))))}),$(".rule button").click(function(){$(".rule").hide(),$(".container").show()})});